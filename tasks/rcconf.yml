---
- name: "Rc_conf: configure /etc/rc.conf"
  notify: graceful apache
  ansible.builtin.lineinfile:
    dest: /etc/rc.conf
    regexp: ^\s*{{ item.key }}\s*=(.*)$
    line: '{{ item.key }}="{{ item.value }}"'
    backup: "{{ apache_backup_conf }}"
  loop: "{{ apache_rcconf }}"

- name: "Rc_conf: Enable and Start Apache"
  when: apache_enable | bool
  notify: enable and start apache
  ansible.builtin.lineinfile:
    dest: /etc/rc.conf
    regexp: ^\s*{{ apache_service }}_enable\s*=(.*)$
    line: '{{ apache_service }}_enable="YES"'
    backup: "{{ apache_backup_conf }}"

- name: "Rc_conf: Disable and Stop Apache"
  when: not apache_enable | bool
  notify: disable and stop apache
  ansible.builtin.lineinfile:
    dest: /etc/rc.conf
    regexp: ^\s*{{ apache_service }}_enable\s*=(.*)$
    line: '{{ apache_service }}_enable="NO"'
    backup: "{{ apache_backup_conf }}"

# EOF
